<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LinkedIn Scraper</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <div class="info-icon" id="infoIcon">â„¹ï¸</div>
    <div id="disclaimerTooltip" class="disclaimer-tooltip">
        <strong>Privacy & Compliance</strong><br>
        â€¢ We scrape your top 10 posts related to you.<br>
        â€¢ All data is saved in <strong>Chrome Local Storage</strong>.<br>
        â€¢ Your API Key is stored locally on your device.<br>
        â€¢ No data is sent to external servers.
    </div>

    <img src="icon.png" class="logo" alt="Logo" width="60" height="60" style="margin-bottom: 10px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
    <h1>LinkedInVibe</h1>
    <p class="subtitle">Create viral LinkedIn content instantly.</p>
    
    <div id="onboarding" class="section" style="display:none;">
      <p style="font-size: 13px; color: #666; margin-bottom: 15px;">
        To use LinkedInVibe, complete these steps:
      </p>

      <div class="input-group">
          <label>1. LinkedIn Username</label>
          <input type="text" id="usernameInput" placeholder="e.g. johndoe" />
      </div>

      <div class="input-group">
          <label>2. Google Gemini Key (Free)</label>
          <input type="password" id="apiKeyInput" placeholder="Paste API Key here" />
          <div class="helper-link">
            <a href="https://aistudio.google.com/app/apikey" target="_blank">Get Key â†—</a>
          </div>
      </div>

      <div class="input-group" id="dashboardSection" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 12px; border-radius: 8px; border: 1px solid #bae6fd;">
          <label style="color: #0369a1; font-weight: 600;">3. Connect Dashboard</label>
          
          <!-- Status Indicator -->
          <div id="tokenStatus" style="margin: 8px 0; padding: 8px; border-radius: 6px; font-size: 11px; display: none;">
            <!-- Will be populated by JS -->
          </div>
          
          <p id="dashboardInstructions" style="font-size: 11px; color: #0284c7; margin: 8px 0; line-height: 1.4;">
            Open the Dashboard below, login, then click<br/>
            <strong>"Send to Extension"</strong> button.
          </p>
          <a href="https://niskuldeep.github.io/LinkedInVibe/#/dashboard" target="_blank" 
             style="display: inline-block; background: #0ea5e9; color: white; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-size: 12px; font-weight: 500;">
            Open Dashboard â†’
          </a>
      </div>

      <button id="saveUserBtn" class="primary-btn" style="width: 100%; margin-top: 10px;" disabled>Connect & Start ğŸš€</button>
      <p id="connectError" style="font-size: 11px; color: #dc2626; margin-top: 6px; text-align: center; display: none;"></p>
    </div>

    <div id="mainMenu" class="section" style="display:none;">
        <div class="user-display">
           Hi, <span id="menuUserDisplay">User</span> ğŸ‘‹
        </div>

        <div class="menu-card" id="btnInstantPost">
            <div class="card-icon">âš¡ï¸</div>
            <div class="card-text">
                <h3>Instant Viral Post</h3>
                <p>Generate magic content now</p>
            </div>
            <div class="card-arrow">â†’</div>
        </div>

        <div class="menu-card" id="btnSmartScheduler">
            <div class="card-icon">ğŸ“…</div>
            <div class="card-text">
                <h3>Smart Scheduler</h3>
                <p>Plan ahead & Auto-post</p>
            </div>
        </div>
    </div>

    <div id="actionArea" class="section" style="display:none;">
      <button id="backToMenu" class="back-link">â† Back to Menu</button>
      
      <div class="user-display" style="display:none;"> <!-- Hidden duplicate, used for logic but not UI -->
          User: <span id="displayUser"></span> 
      </div>
      
      <div class="action-header">
          <h2>Create New Post</h2>
      </div>

      <div style="margin-bottom: 12px; display: flex; align-items: center; gap: 8px; font-size: 12px; color: #444; background: #f3f4f6; padding: 8px; border-radius: 6px;">
          <input type="checkbox" id="scrapePostsCheckbox" checked style="accent-color: #0a66c2; width: 14px; height: 14px;">
          <label for="scrapePostsCheckbox" style="cursor: pointer;">Scrape Recent Posts (Last 10)</label>
      </div>

      <button id="autoScrapeBtn" class="primary-btn">âœ¨ Generate Magic Post</button>
      
      <div style="margin-top: 15px; width: 100%; text-align: left;">
          <label style="font-size: 12px; font-weight: 500; color: #555;">AI Model:</label>
          <select id="modelSelector" style="padding: 5px; border-radius: 6px; border: 1px solid #ccc; width: 100%; margin-bottom: 5px; font-size: 12px;">
              <option value="gemini-3-flash-preview">Gemini 3 Flash (Balanced) - âš¡ï¸âš¡ï¸</option>
              <option value="gemini-3-pro-preview">Gemini 3 Pro (Best Quality) - ğŸ§ ğŸ§ ğŸ§ </option>
              <option value="gemini-2.5-flash-lite-preview-09-2025">Gemini 2.5 Flash Lite (Fastest) - âš¡ï¸âš¡ï¸âš¡ï¸</option>
              <option value="gemini-2.5-flash">Gemini 2.5 Flash (Free Tier) - ğŸ†“ (Text Only)</option>
              <option value="local-z-image">Local Z-Image (Beta) - ğŸ  (Requires Setup)</option>
          </select>
          <div id="costDisplay" style="font-size: 10px; color: #666; margin-bottom: 10px; padding: 4px 8px; background: #f0f9ff; border-radius: 4px; border-left: 3px solid #0ea5e9;">
              Cost: $0.50 / 1M tokens (Recommended)
          </div>

          <label style="font-size: 12px; font-weight: 500; color: #555;">Custom Topic (Optional)</label>
          <textarea id="customTopic" rows="2" placeholder="e.g. 'React 19 features' or 'My journey as a startup founder'"></textarea>
          
          <div style="margin-top: 10px; display: flex; align-items: center; justify-content: space-between;">
             <label style="font-size: 12px; font-weight: 500; color: #555;">Schedule:</label>
             <select id="scheduleDelay" style="padding: 5px; border-radius: 6px; border: 1px solid #ccc; width: 60%;">
                 <option value="0">ğŸš€ Post Now</option>
                 <option value="1">â±ï¸ In 1 Minute (Test)</option>
                 <option value="30">â±ï¸ In 30 Minutes</option>
                 <option value="60">â±ï¸ In 1 Hour</option>
                 <option value="180">â±ï¸ In 3 Hours</option>
                 <option value="custom">ğŸ“… Custom Time</option>
             </select>
          </div>
          <input type="time" id="customTimeInput" style="display:none; width: 100%;">
      </div>
    </div>

    <div id="status" class="status">Ready to create magic...</div>
    
    <!-- Local AI Setup Modal -->
    <div id="localSetupModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:100;">
        <div style="background:white; margin: 40px 20px; padding: 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
            <h3 style="margin-top:0; color:#0369a1;">ğŸ  Local AI Setup</h3>
            <p style="font-size:12px; color:#555; line-height:1.4;">
                To use <strong>Z-Image-Turbo</strong> locally:
            </p>
            <ol style="font-size:11px; color:#444; padding-left:20px; text-align:left;">
                <li style="margin-bottom:6px;">Install <strong>Python 3.10+</strong> on your computer.</li>
                <li style="margin-bottom:6px;">Your device needs a GPU (Apple Silicon M1/M2/M3 recommended).</li>
                <li style="margin-bottom:6px;">The <strong>first run</strong> will take time (downloading ~6GB model).</li>
            </ol>
            <button id="closeLocalModal" style="width:100%; padding:8px; background:#0ea5e9; color:white; border:none; border-radius:6px; font-weight:600; cursor:pointer;">Got it!</button>
        </div>
    </div>

    <div id="menuFooter" style="margin-top: 10px; font-size: 11px; color: #888; display:none;">
        <a href="#" id="changeUser">Settings</a> | <a href="#" id="resetKey">Reset</a>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html>
